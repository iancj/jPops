jQuery.jPops={conf:{title:"提示",content:"内容",width:"auto",height:"auto",minHeight:130,minWidth:400,okButton:"确定",cancelButton:"取消",verticalOffset:0,horizontalOffset:0,overlayOpacity:.5,overlayColor:"#000",clickToClose:!0,singleText:!0,callback:null},alert:function(a){var b=$.extend({},this.conf,a);b.type="alert",this.showAlerts(b)},confirm:function(a){var b=$.extend({},this.conf,a);b.type="confirm",this.showAlerts(b)},prompt:function(a){this.conf.defaultValue="";var b=$.extend({},this.conf,a);b.type="prompt",this.showAlerts(b)},custom:function(a){var b=$.extend({},this.conf,a);b.type="custom",this.showAlerts(b)},message:function(a){this.conf.messageType="info",this.conf.messageTimging=1500,this.conf.messageAutoHide=!0;var b=$.extend({},this.conf,a);b.type="message",this.showAlerts(b)},progress:function(a){this.timer&&clearTimeout(this.timer),this.conf.width=500,this.conf.progressPer=10,this.conf.progressType="",this.conf.progressActived=!1;var b=$.extend({},this.conf,a);if(b.type="progress",1!=$(".popup-progress").length){var c='<div class="popup-progress"><h4 class="content"></h4>';c+=b.progressActived?'<div class="progress progress-striped active">':'<div class="progress">',c+='<div class="bar"></div></div></div>',$("body").append(c)}var d=$(".popup-progress"),e=d.find(".content"),f=d.find(".progress"),g=d.find(".bar"),h=$.browser.msie&&parseInt($.browser.version)<=6?"absolute":"fixed";e.text(b.content),g.css("width",b.progressPer+"%").removeClass("bar-info bar-warning bar-success bar-danger").addClass("bar-"+b.progressType),b.progressActived?f.addClass("progress-striped active"):f.removeClass("progress-striped active"),d.show().css({width:b.width,top:150,left:"50%",textAlign:"center",position:h,zIndex:99999}),this.reposition(b),this.showOverlay(b)},progressUpdate:function(a){var b=$(".popup-progress"),c=b.find(".content"),d=b.find(".progress"),e=d.find(".bar"),f=$.extend({},this.conf,a);f.type="progress",f.width=a.width;for(key in a)switch(key){case"content":c.text(f.content);break;case"progressPer":e.css("width",f.progressPer+"%");break;case"progressType":e.removeClass("bar-info bar-warning bar-success bar-danger").addClass("bar-"+f.progressType);break;case"progressActived":f.progressActived?d.removeClass("progress-striped active"):d.addClass("progress-striped active");case"callback":f.callback&&(f.callback(!0),f.callback=null)}},progressHide:function(){$(".popup-progress").hide().css("width","auto"),this.hideOverlay()},showAlerts:function(a){if($(".popup-container").length<1){var b='<div class="popup-container"><h1 class="popup-title"></h1><a href="javascript:;" class="popup-close"></a><div class="popup-content"><div class="popup-message"></div><div class="popup-prompt"><input type="text"></div></div><div class="popup-panel"><a href="javascript:;" class="btn btn-primary popup-ok"></a> <a href="javascript:;" class="btn popup-cancel"></a></div></div>';$("body").append(b)}this.showOverlay(a),this.timer&&clearTimeout(this.timer);var c=this,d=$(".popup-container"),e=d.find(".popup-title"),f=d.find(".popup-content"),g=d.find(".popup-message"),h=d.find(".popup-prompt"),i=d.find(".popup-panel"),j=d.find(".popup-ok"),k=d.find(".popup-cancel"),l=d.find(".popup-close");switch(h.hide(),i.show(),a.type){case"alert":k.hide(),a.content="<div style='font-size:16px;padding:10px 0;line-height:1.5em;'>"+a.content+"</div>";break;case"confirm":k.show(),a.content="<div style='font-size:16px;padding:10px 0;line-height:1.5em;'>"+a.content+"</div>";break;case"prompt":h.show(),k.show(),h.find("input").val(a.defaultValue).focus().select(),a.content="<div style='font-size:14px;font-weight:bold;line-height:1.5em;'>"+a.content+"</div>";break;case"custom":k.show();break;case"message":i.hide(),d.removeClass("info warning success danger").addClass(a.messageType),a.content="<div style='font-size:16px;padding:10px 0;line-height:1.5em;'>"+a.content+"</div>",f.css("marginBottom",0)}if(("alert"==a.type||"confirm"==a.type||"message"==a.type)&&g.css({paddingTop:10,paddingBottom:20}),e.text(a.title),g.html(a.content),j.text(a.okButton),k.text(a.cancelButton),d.show().css({width:a.width,height:a.height,minWidth:a.minWidth,minHeight:a.minHeight}),c.reposition(a),"message"!=a.type)j.click(function(){if(a.callback){if("prompt"==a.type){var b=$(".popup-container").find(".popup-prompt").find("input").val();a.callback(b)}else a.callback(!0);a.clickToClose&&(a.callback=null)}return a.clickToClose&&c.hideAlerts(),!1}),k.click(function(){return a.callback&&(a.callback("prompt"==a.type?null:!1),a.callback=null),c.hideAlerts(),!1}),l.click(function(){return c.hideAlerts(),!1});else{var m=function(){d.removeClass(a.messageType),l.unbind("click"),a.callback&&(a.callback(!0),a.callback=null),c.hideAlerts()};a.messageAutoHide&&(c.timer=setTimeout(m,a.messageTimging)),l.click(m)}},hideAlerts:function(){$(".popup-container").remove(),this.hideOverlay()},showOverlay:function(a){var b=$.extend({},this.conf,a);$(".popup-overlay").length<1&&($("body").append('<div class="popup-overlay"></div>'),$(".popup-overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%"})),$(".popup-overlay").css({height:$(window).height(),background:b.overlayColor,opacity:b.overlayOpacity}).show(),$("body").css("overflow","hidden")},hideOverlay:function(){$(".popup-overlay").hide(),$("body").css("overflow","auto")},showLoading:function(){if($(".popup-loading").length<1){var a='<div class="popup-loading" style="display:none;"></div>';$("body").append(a)}this.showOverlay(),$(".popup-loading").fadeIn(300)},hideLoading:function(){$(".popup-loading").fadeOut(300),this.hideOverlay()},reposition:function(a){switch(opts=$.extend({},this.conf,a),opts.type){case"alert":case"confirm":case"message":case"prompt":case"custom":var b=$(".popup-container"),c=b.find(".popup-content"),d=b.find(".popup-title"),e=b.find(".popup-panel"),f=($(window).height(),$(window).width(),b.outerHeight(),$.browser.msie&&parseInt($.browser.version)<=6?"absolute":"fixed");if(b.outerHeight()>=$(window).height()){var g=$(window).height()-80-d.outerHeight()-e.outerHeight();c.css({height:g,"overflow-y":"auto"})}else c.css({height:"auto"});b.css({position:f,zIndex:99999});var h=$(window).height()/2-b.outerHeight()/2+opts.verticalOffset,i=$(window).width()/2-b.outerWidth()/2+opts.horizontalOffset;0>h&&(h=0),0>i&&(i=0),$.browser.msie&&parseInt($.browser.version)<=6&&(h+=$(window).scrollTop()),b.css({top:h+"px",left:i+"px"});break;case"progress":$(".popup-progress").css({marginLeft:-opts.width/2})}$(".popup-overlay").height($(document).height())},timer:null};