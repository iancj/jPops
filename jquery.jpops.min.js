jQuery.jPop=function(d){var f={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.5,overlayColor:"#000",okButton:"\u786e\u5b9a",okButtonClass:"btn btn-primary",cancelButton:"\u53d6\u6d88",cancelButtonClass:"btn",dialogClass:null,type:"alert",title:"alert",message:"",value:"",callback:function(){}},e=$.extend(f,d);h(e.title,e.message,e.value,e.type,e.callback);function h(l,k,j,i,n){b();a("show");$("body").append('<div id="popup_container"><h1 id="popup_title"></h1><a href="javascript:;" class="popupIcon"><i class="gicon-remove white"></i></a><div id="popup_content"><div id="popup_message"></div></div></div>');$("#popup_container .popupIcon").click(b);if(e.dialogClass){$("#popup_container").addClass(e.dialogClass)}var m=($.browser.msie&&parseInt($.browser.version)<=6)?"absolute":"fixed";$("#popup_container").css({position:m,zIndex:99999});$("#popup_title").text(l);$("#popup_content").addClass(i);$("#popup_message").html(k);g();c(true);switch(i){case"alert":$("#popup_message").after('<div id="popup_panel"><input type="button" class="'+e.okButtonClass+'" value="'+e.okButton+'" id="popup_ok" /></div>');$("#popup_ok").click(function(){b();n(true)});break;case"confirm":$("#popup_message").after('<div id="popup_panel"><input type="button" class="'+e.okButtonClass+'" value="'+e.okButton+'" id="popup_ok" /> <input type="button" class="'+e.cancelButtonClass+'" value="'+e.cancelButton+'" id="popup_cancel" /></div>');$("#popup_ok").click(function(){b();if(n){n(true)}});$("#popup_cancel").click(function(){b();if(n){n(false)}});break;case"prompt":$("#popup_message").append('<div><input type="text" id="popup_prompt" /></div>').after('<div id="popup_panel"><input type="button" class="'+e.okButtonClass+'" value="'+e.okButton+'" id="popup_ok" /> <input type="button" class="'+e.cancelButtonClass+'" value="'+e.cancelButton+'" id="popup_cancel" /></div>');$("#popup_prompt").width($("#popup_message").width());$("#popup_ok").click(function(){var o=$("#popup_prompt").val();b();if(n){n(o)}});$("#popup_cancel").click(function(){b();if(n){n(null)}});if(j){$("#popup_prompt").val(j)}$("#popup_prompt").focus().select();break}e.okButton="\u786e\u5b9a";e.cancelButton="\u53d6\u6d88"}function b(){$("#popup_container").remove();a("hide");c(false)}function a(i){switch(i){case"show":a("hide");$("body").append('<div id="popup_overlay"></div>');$("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:$(document).height(),background:e.overlayColor,opacity:e.overlayOpacity});break;case"hide":$("#popup_overlay").remove();break}}function g(){var j=(($(window).height()/2)-($("#popup_container").outerHeight()/2))+e.verticalOffset;var i=(($(window).width()/2)-($("#popup_container").outerWidth()/2))+e.horizontalOffset;if(j<0){j=0}if(i<0){i=0}if($.browser.msie&&parseInt($.browser.version)<=6){j=j+$(window).scrollTop()}$("#popup_container").css({top:j+"px",left:i+"px"});$("#popup_overlay").height($(document).height())}function c(i){if(e.repositionOnResize){switch(i){case true:$(window).bind("resize",g);break;case false:$(window).unbind("resize",g);break}}}};
